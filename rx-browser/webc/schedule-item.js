import { html } from "lit";
import { when } from "lit/directives/when.js";
import { choose } from "lit/directives/choose.js";
import TWElement from "./tw";
class ScheduleItem extends TWElement {
    constructor() {
        super();
        this.isControlButtonActive = true;
        this.isTrashButtonActive = true;
    }
    firstUpdated() {
        switch (parseInt(this.status)) {
            case 0:
                this.isTrashButtonActive = false;
                break;
            case 1:
                this.isControlButtonActive = false;
                break;
            case 2:
                break;
            case 3:
                this.isControlButtonActive = false;
                this.isTrashButtonActive = false;
                break;
        }
    }
    async submit(e) {
        e.preventDefault();
        e.stopPropagation();
        const action = "/schedule?action=" + e.submitter.dataset.action;
        let form = new FormData();
        form.append("notebook", this.notebookId);
        const rsp = await fetch(action, {
            method: "POST",
            body: form,
        }).then((r) => r.json());
        if (rsp.Result == "ok") {
            window.location.reload();
        }
        else {
            console.error(rsp.Message);
        }
    }
    render() {
        const controlButton = html `
      <button
        type="submit"
        data-action="${parseInt(this.status) == 0
            ? "stop"
            : parseInt(this.status) == 2
                ? "start"
                : ""}"
      >
        ${choose(parseInt(this.status), [
            [
                0,
                () => html `
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12 21C10.22 21 8.47991 20.4722 6.99987 19.4832C5.51983 18.4943 4.36628 17.0887 3.68509 15.4442C3.0039 13.7996 2.82567 11.99 3.17294 10.2442C3.5202 8.49836 4.37737 6.89472 5.63604 5.63604C6.89472 4.37737 8.49836 3.5202 10.2442 3.17294C11.99 2.82567 13.7996 3.0039 15.4442 3.68509C17.0887 4.36628 18.4943 5.51983 19.4832 6.99987C20.4722 8.47991 21 10.22 21 12C21 14.387 20.0518 16.6761 18.364 18.364C16.6761 20.0518 14.387 21 12 21ZM12 4.5C10.5166 4.5 9.0666 4.93987 7.83323 5.76398C6.59986 6.58809 5.63856 7.75943 5.07091 9.12988C4.50325 10.5003 4.35473 12.0083 4.64411 13.4632C4.9335 14.918 5.64781 16.2544 6.6967 17.3033C7.7456 18.3522 9.08197 19.0665 10.5368 19.3559C11.9917 19.6453 13.4997 19.4968 14.8701 18.9291C16.2406 18.3614 17.4119 17.4001 18.236 16.1668C19.0601 14.9334 19.5 13.4834 19.5 12C19.5 10.0109 18.7098 8.10323 17.3033 6.6967C15.8968 5.29018 13.9891 4.5 12 4.5Z"
                  fill="black"
                />
                <path
                  d="M14.5 8H9.5C8.67157 8 8 8.67157 8 9.5V14.5C8 15.3284 8.67157 16 9.5 16H14.5C15.3284 16 16 15.3284 16 14.5V9.5C16 8.67157 15.3284 8 14.5 8Z"
                  fill="black"
                />
              </svg>
            `,
            ],
            [
                2,
                () => html `
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M8.50002 19.75C8.40032 19.7494 8.30174 19.729 8.21002 19.69C8.0732 19.6341 7.95627 19.5384 7.87428 19.4155C7.7923 19.2925 7.74902 19.1478 7.75002 19V4.99997C7.75543 4.85766 7.80126 4.71983 7.88213 4.6026C7.96301 4.48538 8.07559 4.3936 8.2067 4.33801C8.33782 4.28241 8.48206 4.2653 8.62254 4.28867C8.76303 4.31204 8.89396 4.37493 9.00002 4.46997L16 11.47C16.1405 11.6106 16.2194 11.8012 16.2194 12C16.2194 12.1987 16.1405 12.3893 16 12.53L9.00002 19.53C8.86584 19.6619 8.68797 19.7402 8.50002 19.75ZM9.25002 6.80997V17.19L14.44 12L9.25002 6.80997Z"
                  fill="black"
                />
              </svg>
            `,
            ],
        ])}
      </button>
    `;
        const trashButton = html `
      <button type="submit" data-action="remove">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M20 8.70001H4C3.90151 8.70001 3.80398 8.68061 3.71299 8.64292C3.62199 8.60523 3.53931 8.54999 3.46967 8.48034C3.40003 8.4107 3.34478 8.32802 3.30709 8.23703C3.2694 8.14603 3.25 8.0485 3.25 7.95001C3.25 7.85152 3.2694 7.75399 3.30709 7.663C3.34478 7.57201 3.40003 7.48933 3.46967 7.41968C3.53931 7.35004 3.62199 7.29479 3.71299 7.2571C3.80398 7.21941 3.90151 7.20001 4 7.20001H20C20.1989 7.20001 20.3897 7.27903 20.5303 7.41968C20.671 7.56033 20.75 7.7511 20.75 7.95001C20.75 8.14892 20.671 8.33969 20.5303 8.48034C20.3897 8.621 20.1989 8.70001 20 8.70001Z"
            fill="black"
          />
          <path
            d="M16.44 20.75H7.56C7.24309 20.7717 6.92503 20.7302 6.62427 20.628C6.3235 20.5259 6.04601 20.365 5.80788 20.1548C5.56975 19.9446 5.37572 19.6891 5.23704 19.4034C5.09836 19.1176 5.01779 18.8071 5 18.49V7.99998C5 7.80107 5.07902 7.61031 5.21967 7.46965C5.36032 7.329 5.55109 7.24998 5.75 7.24998C5.94891 7.24998 6.13968 7.329 6.28033 7.46965C6.42098 7.61031 6.5 7.80107 6.5 7.99998V18.49C6.5 18.9 6.97 19.25 7.5 19.25H16.38C16.94 19.25 17.38 18.9 17.38 18.49V7.99998C17.38 7.78516 17.4653 7.57913 17.6172 7.42723C17.7691 7.27532 17.9752 7.18998 18.19 7.18998C18.4048 7.18998 18.6109 7.27532 18.7628 7.42723C18.9147 7.57913 19 7.78516 19 7.99998V18.49C18.9822 18.8071 18.9016 19.1176 18.763 19.4034C18.6243 19.6891 18.4303 19.9446 18.1921 20.1548C17.954 20.365 17.6765 20.5259 17.3757 20.628C17.075 20.7302 16.7569 20.7717 16.44 20.75ZM16.56 7.74998C16.4611 7.75133 16.363 7.73285 16.2714 7.69563C16.1798 7.65842 16.0966 7.60323 16.0267 7.53331C15.9568 7.4634 15.9016 7.38018 15.8644 7.28858C15.8271 7.19698 15.8087 7.09885 15.81 6.99998V5.50998C15.81 5.09999 15.33 4.74998 14.81 4.74998H9.22C8.67 4.74998 8.22 5.09999 8.22 5.50998V6.99998C8.22 7.1989 8.14098 7.38966 8.00033 7.53031C7.85968 7.67097 7.66891 7.74998 7.47 7.74998C7.27109 7.74998 7.08032 7.67097 6.93967 7.53031C6.79902 7.38966 6.72 7.1989 6.72 6.99998V5.50998C6.75872 4.8813 7.04203 4.29275 7.50929 3.87035C7.97655 3.44795 8.5906 3.22527 9.22 3.24998H14.78C15.4145 3.21717 16.0362 3.4362 16.51 3.85944C16.9838 4.28267 17.2713 4.87586 17.31 5.50998V6.99998C17.3113 7.09931 17.2929 7.19792 17.2558 7.29007C17.2187 7.38222 17.1637 7.46608 17.0939 7.53679C17.0241 7.6075 16.941 7.66364 16.8493 7.70195C16.7577 7.74027 16.6593 7.75999 16.56 7.75998V7.74998Z"
            fill="black"
          />
          <path
            d="M10.22 17C10.0219 16.9974 9.8326 16.9175 9.6925 16.7774C9.55241 16.6373 9.47256 16.4481 9.46997 16.25V11.72C9.46997 11.5211 9.54899 11.3303 9.68964 11.1896C9.83029 11.049 10.0211 10.97 10.22 10.97C10.4189 10.97 10.6096 11.049 10.7503 11.1896C10.891 11.3303 10.97 11.5211 10.97 11.72V16.24C10.9713 16.3393 10.9529 16.4379 10.9158 16.5301C10.8787 16.6222 10.8236 16.7061 10.7539 16.7768C10.6841 16.8475 10.601 16.9036 10.5093 16.9419C10.4177 16.9803 10.3193 17 10.22 17Z"
            fill="black"
          />
          <path
            d="M13.78 17C13.5811 17 13.3904 16.921 13.2497 16.7803C13.109 16.6396 13.03 16.4489 13.03 16.25V11.72C13.03 11.5211 13.109 11.3303 13.2497 11.1896C13.3904 11.049 13.5811 10.97 13.78 10.97C13.9789 10.97 14.1697 11.049 14.3104 11.1896C14.451 11.3303 14.53 11.5211 14.53 11.72V16.24C14.53 16.4398 14.4513 16.6316 14.311 16.7739C14.1706 16.9161 13.9799 16.9973 13.78 17Z"
            fill="black"
          />
        </svg>
      </button>
    `;
        return html `
      <form class="flex" @submit="${this.submit.bind(this)}">
        <slot></slot>
        ${when(this.isControlButtonActive, () => controlButton)}
        ${when(this.isTrashButtonActive, () => trashButton)}
      </form>
    `;
    }
}
ScheduleItem.properties = {
    notebookId: { type: String, attribute: "notebook-id" },
    status: { type: String },
    isControlButtonActive: { state: true },
    isTrashButtonActive: { state: true },
};
customElements.define("wt-schedule-item", ScheduleItem);
//# sourceMappingURL=schedule-item.js.map